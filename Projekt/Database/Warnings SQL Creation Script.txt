DROP TABLE IF EXISTS aems."Warnings" CASCADE;
CREATE TABLE aems."Warnings"
(
  warning_id NUMERIC(10,0) NOT NULL,
  user_id NUMERIC(10, 0) NOT NULL,
  name character varying(100) NOT NULL,
  
  is_warning BOOLEAN, -- Warning or Info Message
  max_derivation numeric(3,0) NOT NULL, -- 0 to 100 Percent
  -- Base Value to calculate derivation ?
  
  CONSTRAINT pk_warnings PRIMARY KEY(warning_id),
  CONSTRAINT warnings_userid FOREIGN KEY ("user_id")
    REFERENCES aems."Users" (id) MATCH SIMPLE
	ON UPDATE NO ACTION ON DELETE NO ACTION
)

DROP TABLE IF EXISTS aems."WarningMeters" CASCADE;
CREATE TABLE aems."WarningMeters"
(
  meter_id character varying(150) NOT NULL,
  warning_id NUMERIC(10,0) NOT NULL
)

DROP TABLE IF EXISTS aems."Regulations" CASCADE;
CREATE TABLE aems."Regulations"
(
  regulation_id NUMERIC(2, 0) NOT NULL,
  display_name character varying(32) NOT NULL,
  
  CONSTRAINT pk_regulations PRIMARY KEY(regulation_id)
)

DROP TABLE IF EXISTS aems."WarningException" CASCADE;
CREATE TABLE aems."WarningException"
(
  exception_id NUMERIC(10,0) NOT NULL,
  warning_id NUMERIC(10, 0) NOT NULL,
  
  max_derivation NUMERIC(10, 0) NOT NULL,
  
  from_date DATE,
  to_date DATE,
  
  -- From and To Date, OR:
  regulation_id NUMERIC(2, 0),
  regulation_value_from NUMERIC(3, 0),
  regulation_value_to NUMERIC(3, 0)
  
  CONSTRAINT pl_warning_exception PRIMARY KEY(exception_id),
  CONSTRAINT fk_warning_exception_wid FOREIGN KEY ("warning_id"),
    REFERENCES aems."Warnings" (warning_id) MATCH SIMPLE
    ON UPDATE NO ACTION ON DELETE NO ACTION
)